---
// src/layouts/Layout.astro
interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="id" data-theme="light">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.png" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<link
		href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
		rel="stylesheet"
		/>
		<!-- Tambahkan di src/layouts/Layout.astro -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
        <link rel="manifest" href="/manifest.json">
        <meta name="theme-color" content="#10b981">
	</head>
    <body class="bg-base-200 min-h-screen font-sans">
		<slot />
	</body>
</html>

<script is:inline>
    // Fungsi Logout Sidebar
    window.handleSidebarLogout = () => {
        // Asumsi showConfirm sudah ada di global (AlertSystem)
        if (typeof showConfirm === 'function') {
             showConfirm('Logout', 'Yakin ingin keluar aplikasi?', 'Logout', 'danger')
             .then((isConfirmed) => {
                if(isConfirmed) {
                    localStorage.removeItem('token');
                    localStorage.removeItem('user');
                    window.location.href = '/';
                }
             });
        } else {
            // Fallback jika alert system belum load
            if(confirm("Logout?")) {
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                window.location.href = '/';
            }
        }
    }

    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
            .then(reg => console.log('SW Registered!', reg))
            .catch(err => console.log('SW Failed', err));
        });
    }
</script>